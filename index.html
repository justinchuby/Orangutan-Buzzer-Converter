<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Orangutan Buzzer Converter</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.14.7/react.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.14.7/react-dom.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.24/browser.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
  </head>
  <body>
    <div id="convertBox" align="center"></div>
    <script src="js/converter.js"></script>
    <script type="text/babel">
      // var PramBox = React.createClass({
      //   getInitialState: function() {
      //     return {"value": this.props.initialValue};
      //   },
      //   handleChange: function() {
      //     this.setState(value: event.target.value)
      //   },
      //   render: function() {
      //     return (
      //         <div className="input-group">
      //           <span className="input-group-addon">this.props.addon</span>
      //           <input type="text" className="form-control" value={this.state.value} onChange={this.handleChange}/>
      //         </div>
      //     );
      //   }
      // });

      var Converter = React.createClass({
        getInitialState: function() {
          return {
            "time": this.props.initialTime,
            "silent": this.props.initialSilent,
            "input": "",
            "output": {},
            "timeLen": parseInt(this.props.initialTime),
            "silentLen": parseInt(this.props.initialSilent)
          };
        },

        convert: convert,

        updateOutput: function() {
          var _output = this.convert(this.state.input, this.state.timeLen, this.state.silentLen);
          this.setState({output: _output});
        },

        handleInputChange: function() {
          console.log(event.target.value);
          this.setState({input: event.target.value});
          console.log(this.state);
          this.updateOutput();
        },
        handleTimeChange: function() {
          var _value = event.target.value;
          this.setState({time: _value});
          if (!isNaN(_value)) {
            this.setState({timeLen: parseInt(_value)});
          }
          this.updateOutput();
        },
        handleSilentChange: function() {
          var _value = event.target.value;
          this.setState({silent: _value});
          if (!isNaN(_value)) {
            this.setState({silentLen: parseInt(_value)});
          }
          this.updateOutput();
        },

        textAreaStyle: {
          resize: "vertical"
        },

        render: function() {
          return (
            <div className="container">
              <h1> Orangutan Buzzer Converter </h1>
              <div className="row">
                <div className="col-md-10 col-md-offset-1">
                  <textarea className="form-control" style={this.textAreaStyle} rows="10" placeholder="Enter notes here" value={this.state.input} onChange={this.handleInputChange} />
                  <div className="row">
                    <div className="col-sm-3">
                        <div className="input-group">
                          <span className="input-group-addon">Time</span>
                          <input type="text" className="form-control" value={this.state.time} onChange={this.handleTimeChange}/>
                        </div>
                    </div>
                    <div className="col-sm-4 col-sm-offset-2">
                      <div className="input-group">
                        <span className="input-group-addon">Silent Length</span>
                        <input type="text" className="form-control" value={this.state.silent} onChange={this.handleSilentChange}/>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div className="row">
                <div className="col-md-10 col-md-offset-1">
                  <pre className="text-left">
                  //Melody:<br/>{this.state.output.melody} <br/>
                  //Time:<br/>{this.state.output.time}
                  </pre>
                </div>
              </div>
             </div>
        );
        }
      });

      ReactDOM.render(
        <Converter initialTime="250" initialSilent="30" />,
        document.getElementById('convertBox')
      );
    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>  </body>
</html>
